import{v as e,u as t,r as n,a,b as s,c as i,d as r,e as l}from"./vendor-DaDVUCOI.js";function remarkObsidianAdmonitions(){return t=>{e(t,e=>{if("blockquote"===e.type&&e.children.length>0){const t=e.children[0];if("paragraph"===t.type&&t.children.length>0&&"text"===t.children[0].type){const n=t.children[0].value.trim().match(/^\[!(NOTE|TIP|WARNING|CAUTION)]/i);if(n){const a=n[1].toLowerCase(),s=e.data||(e.data={});s.hName="div",s.hProperties={className:["admonition",a,"blockquote"]},t.children[0].value=t.children[0].value.replace(/^\[!(NOTE|TIP|WARNING|CAUTION)]\s*/,"")}}}})}}function remarkHugoTabsToDirectives(){return e=>{const t=e.children;let n=0;for(;n<t.length;){const e=getRawText$1(t[n]);if(e&&e.includes("{{< tabs")){const a=e.match(/items="([^"]+)"/),s=a?a[1].split(",").map(e=>e.trim()):[];let i=n;for(;i<t.length&&!getRawText$1(t[i])?.includes("{{< /tabs >}}");)i++;if(i<t.length){const e=t.slice(n+1,i),a=[],r=[];let l=0,c=null;e.forEach(e=>{const t=getRawText$1(e);if(t&&t.includes("{{< tab")){const e=t.match(/{{<\s*tab\s*(?:"([^"]+)")?\s*>\}}/),n=e&&e[1]?e[1]:s[l],a=`tab-${Math.random().toString(36).substr(2,6)}`;return r.push({label:n,id:a}),c={type:"containerDirective",name:"tab",children:[],data:{hName:"div",hProperties:{className:["tab-panel"],id:a,style:0===l?"display: block;":"display: none;"}}},void l++}if(t&&t.includes("{{< /tab >}}"))return c&&a.push(c),void(c=null);c&&c.children.push(e)});const o={type:"containerDirective",name:"tabs",children:[{type:"containerDirective",name:"tab-selector",children:r.map((e,t)=>({type:"text",value:e.label,data:{hName:"button",hProperties:{className:["tab-btn",0===t?"active":""],type:"button",onclick:`(function(el){\n                    const con = el.closest('.tabs-container');\n                    con.querySelectorAll('.tab-panel').forEach(p => p.style.display = 'none');\n                    con.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));\n                    document.getElementById('${e.id}').style.display = 'block';\n                    el.classList.add('active');\n                  })(this)`}}})),data:{hName:"div",hProperties:{className:["tab-nav"]}}},...a],data:{hName:"div",hProperties:{className:["tabs-container"]}}};t.splice(n,i-n+1,o)}}n++}}}function getRawText$1(e){return"paragraph"===e.type?e.children.map(e=>e.value||"").join(""):"html"===e.type||"text"===e.type?e.value:null}function remarkHugoDetailsToHTML(){return e=>{const t=e.children;let n=0;for(;n<t.length;){const e=getRawText(t[n]);if(e&&e.includes("{{% details")){const a=e.match(/title="([^"]+)"/),s=e.includes('closed="true"'),i=a?a[1]:"Details";let r=n,l=!1;for(let e=n+1;e<t.length;e++){const n=getRawText(t[e]);if(n&&n.includes("{{% /details %}}")){r=e,l=!0;break}}if(l){const e={type:"containerDirective",children:[{type:"paragraph",children:[{type:"text",value:i}],data:{hName:"button",hProperties:{type:"button",className:["details-header",s?"":"is-open"],onclick:"(function(btn){\n                  const body = btn.nextElementSibling;\n                  btn.classList.toggle('is-open');\n                  if (body.style.display === 'none') {\n                    body.style.display = 'block';\n                  } else {\n                    body.style.display = 'none';\n                  }\n                })(this)"}}},{type:"containerDirective",children:t.slice(n+1,r),data:{hName:"div",hProperties:{className:["details-body"],style:s?"display: none;":"display: block;"}}}],data:{hName:"div",hProperties:{className:["details-wrapper"]}}};t.splice(n,r-n+1,e)}}n++}}}function getRawText(e){return e.value?e.value:e.children?e.children.map(getRawText).join(""):""}async function parseMarkdown(e){const{matter:c,content:o}=function stripFrontmatter(e){if(!e.startsWith("---\n"))return{matter:{},content:e};const t=e.indexOf("\n---",4);if(-1===t)return{matter:{},content:e};const n=e.slice(4,t).trim(),a=e.slice(t+5),s={};for(const i of n.split("\n")){const e=i.indexOf(":");if(-1===e)continue;const t=i.slice(0,e).trim(),n=i.slice(e+1).trim();s[t]=n}return{matter:s,content:a}}(e),d=t().use(n,{breaks:!0}).use(a).use(remarkObsidianAdmonitions).use(remarkHugoTabsToDirectives).use(remarkHugoDetailsToHTML).use(s).use(i).use(()=>(e,t)=>{t.data.matter=c}).use(r).use(l);return await d.process(o)}export{parseMarkdown as p};
